CREATE TABLE TB_TASK (
                         ID           NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                         JOB_ID       NUMBER(19,0)        NOT NULL,

                         TASK_NAME    VARCHAR2(200 CHAR)  NOT NULL,  -- recordÏùò name
                         HANDLER_KEY  VARCHAR2(200 CHAR)  NOT NULL,
                         CLASS_FQN    VARCHAR2(400 CHAR),
                         METHOD_NAME  VARCHAR2(200 CHAR),
                         DESCRIPTION  VARCHAR2(1000 CHAR),

                         INDEGREE     NUMBER(10,0) DEFAULT 0 NOT NULL,

                         CREATED_AT   TIMESTAMP(6) WITH LOCAL TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,
                         UPDATED_AT   TIMESTAMP(6) WITH LOCAL TIME ZONE DEFAULT CURRENT_TIMESTAMP NOT NULL,

                         CONSTRAINT FK_TASK_JOB FOREIGN KEY (JOB_ID) REFERENCES TB_JOB(ID),
                         CONSTRAINT UX_TASK_UNIQ UNIQUE (JOB_ID, TASK_NAME)
);

CREATE INDEX IX_TASK_JOB     ON TB_TASK (JOB_ID);
CREATE INDEX IX_TASK_HANDLER ON TB_TASK (HANDLER_KEY);
